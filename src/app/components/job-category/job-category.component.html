<div class="jc">
  <!-- Loading -->
  <div *ngIf="isLoading" class="jc-loading">
    <div class="jc-spinner"></div>
    <p class="jc-loading-text">Finding jobs...</p>
  </div>

  <!-- Jobs Content -->
  <div *ngIf="!isLoading && filteredJobs.length > 0">
    <div class="container-fluid px-0">
      <div class="row g-0">
        <!-- Left Column -->
        <div class="col-lg-8 col-md-8 col-12">
          <!-- Header -->
          <div class="jc-header">
            <div class="jc-header-left">
              <div class="jc-breadcrumb">
                <i class="bi bi-house-fill"></i>
                <span routerLink="/all-latest-jobs" style="cursor: pointer;">Home</span>
                <i class="bi bi-chevron-right"></i>
                <span class="jc-category-name">{{ categoryTitle }}</span>
              </div>
              <div class="jc-follow-mini">
                <button class="mini-social-btn mini-yt" (click)="openExternalChannel('https://www.youtube.com/@allindajobs')" title="YouTube">
                  <i class="bi bi-youtube"></i>
                </button>
                <button class="mini-social-btn mini-wa" (click)="openExternalChannel('https://whatsapp.com/channel/0029VbCLJWjCRs1nIKjUlh3p')" title="WhatsApp">
                  <i class="bi bi-whatsapp"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Category Pills -->
          <div class="jc-pills">
            <div class="jc-pills-row">
              <button class="jc-pill jc-pill-all" routerLink="/all-latest-jobs">
                <i class="bi bi-grid-3x3-gap-fill"></i>
                <span>All Jobs</span>
              </button>
              <button class="jc-pill jc-pill-gov" (click)="navigateToCategory('Government Jobs')">
                <i class="bi bi-building-fill"></i>
                <span>All Govt Jobs</span>
              </button>
              <button class="jc-pill jc-pill-prv" (click)="navigateToCategory('All Private Jobs')">
                <i class="bi bi-briefcase-fill"></i>
                <span>All Private Jobs</span>
              </button>
              <button class="jc-pill jc-pill-walk" (click)="navigateToCategory('Walk-in Drives')">
                <i class="bi bi-person-walking"></i>
                <span>All Walk-ins</span>
              </button>
              <button class="jc-pill jc-pill-bank" (click)="navigateToCategory('Banking Jobs')">
                <i class="bi bi-piggy-bank-fill"></i>
                <span>Banking Jobs</span>
              </button>
            </div>
          </div>

          <!-- Official Company Careers (Quick Filter Section) -->
          <div class="occ-section mt-3 mb-4">
            <h6 class="occ-title">
              <i class="bi bi-building-check text-primary"></i> Official Company Careers
            </h6>
            <div class="occ-types row g-2">
              <div class="col-6 col-md-3" *ngFor="let type of careerJobTypes">
                <div class="occ-type-card" [class.active]="selectedCareerType === type" (click)="filterCareersByType(type)">
                  <span class="occ-type-name">{{ type }}</span>
                </div>
              </div>
            </div>

            <!-- Career Links Display based on selected Job Type -->
            <div class="occ-links-container mt-3" *ngIf="selectedCareerType">
              <div class="occ-links-header d-flex justify-content-between align-items-center mb-2">
                <small class="text-primary fw-bold">{{ selectedCareerType }} Career Links</small>
                <button class="btn btn-sm btn-link p-0 text-decoration-none text-muted" (click)="selectedCareerType = ''">
                  <i class="bi bi-x-circle"></i> Close
                </button>
              </div>
              <div class="row g-2">
                <div class="col-md-6" *ngFor="let career of filteredCareers">
                  <div class="occ-link-card">
                    <span class="occ-company-name">{{ career.company }}</span>
                    <a [href]="career.careerOfficeUrl" target="_blank" class="occ-action-link">
                      Click here <i class="bi bi-box-arrow-up-right"></i>
                    </a>
                  </div>
                </div>
                <div class="col-12" *ngIf="filteredCareers.length === 0">
                  <p class="text-muted small mb-0 p-2 text-center border rounded bg-light">No career links available for this category yet.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Jobs List -->
          <div class="jc-jobs" *ngIf="getNewJobs().length > 0">
            <div class="jc-job" *ngFor="let job of getNewJobs()" (click)="viewJobDetails(job)">
              <div class="jc-job-info">
                <span class="jc-job-title">
                  <i class="bi bi-star-fill star-icon"></i>
                  {{ job.title }}
                </span>
                <span class="jc-sep">|</span>
                <span class="jc-job-cat">{{ job.category }}</span>
                <span class="jc-sep">|</span>
                <span class="jc-job-time">{{ getTimeAgo(job.createdDate) }}</span>
              </div>
              <button class="jc-job-btn" (click)="viewJobDetails(job); $event.stopPropagation()">
                <i class="bi bi-arrow-right"></i>
              </button>
            </div>
          </div>

          <!-- Pagination -->
          <nav *ngIf="filteredJobs.length > jobsPerPage" class="jc-pagination mt-4">
            <ul class="pagination justify-content-center">
              <li class="page-item" [class.disabled]="currentPage === 1">
                <button class="page-link" (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">Previous</button>
              </li>
              <li class="page-item" *ngFor="let page of [].constructor(getTotalPages()); let i = index" [class.active]="currentPage === (i+1)">
                <button class="page-link" (click)="goToPage(i+1)">{{ i+1 }}</button>
              </li>
              <li class="page-item" [class.disabled]="currentPage === getTotalPages()">
                <button class="page-link" (click)="goToPage(currentPage + 1)" [disabled]="currentPage === getTotalPages()">Next</button>
              </li>
            </ul>
          </nav>
        </div>

        <!-- Right Column - Filters -->
        <div class="col-lg-4 col-md-4 col-12">
          <div class="jc-filters">
            <h6 class="jc-filter-title">
              <i class="bi bi-funnel"></i>
              <span>Quick Filters</span>
            </h6>
            <hr class="jc-filter-divider">
            <div class="jc-filter-group">
              <label class="jc-filter-option" *ngFor="let company of getUniqueCompanies()">
                <input type="checkbox" [value]="company" (change)="filterByCompany($event)">
                <span>{{ company }}</span>
                <span class="jc-filter-count">({{ getJobCountByCompany(company) }})</span>
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && filteredJobs.length === 0" class="jc-empty">
    <div>
      <div class="jc-empty-icon">
        <i class="bi bi-search"></i>
      </div>
      <h3 class="jc-empty-title">No Jobs Found</h3>
      <p class="jc-empty-text">No jobs in {{ categoryTitle.toLowerCase() }} right now.</p>
      <a routerLink="/all-latest-jobs" class="jc-back-btn">
        <i class="bi bi-arrow-left"></i>
        <span>Browse All Jobs</span>
      </a>
    </div>
  </div>
</div>
