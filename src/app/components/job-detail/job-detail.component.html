<div class="job-detail-page">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3">Loading job details...</p>
  </div>

  <!-- Job Details -->
  <div *ngIf="!isLoading && job" class="job-content">
    <div class="container-fluid px-0">
      <div class="row g-0">
        <!-- Main Content (col-9) -->
        <div class="col-lg-9">
          <!-- Breadcrumb -->
          <div class="breadcrumb-nav">
            <span routerLink="/all-latest-jobs" class="breadcrumb-link">
              <i class="bi bi-house-door"></i> Home
            </span>
            <i class="bi bi-chevron-right"></i>
            <span class="breadcrumb-current">Job Details</span>
          </div>

          <!-- Job Header Card -->
          <div class="job-header-card">
            <h1 class="job-title">{{ job.title }}</h1>
            <div class="job-meta">
              <span class="meta-item">
                <i class="bi bi-building"></i>
                <span>{{ job.company }}</span>
              </span>
              <span class="meta-item">
                <i class="bi bi-tag"></i>
                <span>{{ job.category }}</span>
              </span>
              <span class="meta-item">
                <i class="bi bi-calendar3"></i>
                <span>{{ formatDate(job.createdDate) }}</span>
              </span>
            </div>
          </div>

          <!-- Description Card -->
          <div class="content-card description-section">
            <h2 class="section-title">Job Description</h2>
            <div class="description-content" [innerHTML]="getSafeHtml(job.description)"></div>
          </div>

          <!-- Important Note -->
          <div class="alert-card">
            <i class="bi bi-exclamation-triangle-fill"></i>
            <div class="alert-text">
              <strong>Important:</strong> Please verify details on the official website before applying.
            </div>
          </div>

          <!-- Creator Info -->
          <div class="creator-card">
            <i class="bi bi-person-circle"></i>
            <span>Posted by <strong>Yalla Ramana</strong></span>
          </div>
        </div>

        <!-- Sidebar (col-3) -->
        <div class="col-lg-3">
          <div class="sidebar-sticky">
            <!-- Contact Card -->
            <div class="sidebar-card">
              <h3 class="sidebar-title">Contact Information</h3>
              <div class="info-item">
                <i class="bi bi-telephone"></i>
                <span>{{ job.contactInfo }}</span>
              </div>
              <div class="info-item" *ngIf="job.applicationUrl">
                <i class="bi bi-link-45deg"></i>
                <a [href]="job.applicationUrl" target="_blank" rel="noopener noreferrer">Visit Website</a>
              </div>
            </div>

            <!-- Share Card -->
            <div class="sidebar-card">
              <h3 class="sidebar-title">Share Job</h3>
              <div class="share-buttons">
                <button class="share-btn share-primary" (click)="shareJob(job)" title="Share">
                  <i class="bi bi-share-fill"></i>
                  <span class="btn-text">Share</span>
                </button>
                <button class="share-btn share-whatsapp" (click)="shareOnWhatsApp(job)" title="WhatsApp">
                  <i class="bi bi-whatsapp"></i>
                  <span class="btn-text">WhatsApp</span>
                </button>
                <button class="share-btn share-copy" (click)="copyLink(job)" title="Copy Link">
                  <i class="bi bi-clipboard"></i>
                  <span class="btn-text">Copy</span>
                </button>
              </div>
            </div>

            <!-- Follow Card -->
            <div class="sidebar-card">
              <h3 class="sidebar-title">Follow Us</h3>
              <div class="follow-buttons">
                <button class="follow-btn follow-youtube" (click)="openExternalChannel('https://www.youtube.com/@allindiajobs-newjobs')">
                  <i class="bi bi-youtube"></i>
                  <span class="btn-text">YouTube</span>
                </button>
                <button class="follow-btn follow-whatsapp" (click)="openExternalChannel('https://whatsapp.com/channel/0029Vb79LscKQuJM5YCwc51H')">
                  <i class="bi bi-whatsapp"></i>
                  <span class="btn-text">WhatsApp Channel</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Latest Jobs Section (Full Width) -->
      <div class="full-width-section" *ngIf="latestJobs.length > 0">
        <div class="container-fluid">
          <h3 class="section-heading">Latest Top Jobs</h3>
          <div class="jobs-grid">
            <div class="job-card" *ngFor="let latJob of latestJobs" (click)="viewJobDetails(latJob)">
              <span class="job-card-title">{{ latJob.title }}</span>
              <i class="bi bi-chevron-right"></i>
            </div>
          </div>
        </div>
      </div>

      <!-- Related Jobs Section (Full Width) -->
      <div class="full-width-section related-section" *ngIf="relatedJobs.length > 0">
        <div class="container-fluid">
          <h3 class="section-heading">Related Jobs in {{ job.category }}</h3>
          <div class="jobs-grid">
            <div class="job-card" *ngFor="let relJob of relatedJobs" (click)="viewJobDetails(relJob)">
              <span class="job-card-title">{{ relJob.title }}</span>
              <i class="bi bi-chevron-right"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Job Not Found -->
  <div class="not-found" *ngIf="!isLoading && !job">
    <div class="container">
      <div class="not-found-content">
        <i class="bi bi-exclamation-circle"></i>
        <h2>Job Not Found</h2>
        <p>The job you're looking for doesn't exist or has been removed.</p>
        <button routerLink="/all-latest-jobs" class="btn-back">
          <i class="bi bi-arrow-left"></i> Back to Jobs
        </button>
      </div>
    </div>
  </div>
</div>