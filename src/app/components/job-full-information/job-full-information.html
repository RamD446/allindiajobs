<div class="ultra-compact-page">
  <div *ngIf="isLoading" class="tiny-loading">
    <div class="mini-spin"></div>Loading...
  </div>
  <div *ngIf="!isLoading && job" class="ultra-content">
    <div class="row g-2">
      <div class="col-12 col-lg-6 order-1 order-lg-1">
        
        <!-- Card 1: Job Title, Created By, Date -->
        <div class="info-card" [ngClass]="getCategoryClass(job.category)">
          <h1 class="job-title-main">{{ job.title }}</h1>
          <div class="title-divider"></div>
          <div class="job-meta-row">
            <span class="meta-item">Created by Yalla Ramana</span>
            <span class="meta-separator">|</span>
            <span class="meta-item">{{ formatDate(job.createdDate) }}</span>
          </div>
        </div>
        
        <!-- Card 2: Job Description Only -->
        <div class="info-card desc-card">
          <h1 class="card-section-title">Job Description</h1>
          <div class="job-desc-content" [innerHTML]="getSafeHtml(job.description)"></div>
           <div class="summary-row link-row" *ngIf="job.applicationUrl">
            <i class="bi bi-link-45deg"></i>
            <span class="summary-label">More Information:</span>
            <a [href]="job.applicationUrl" target="_blank" class="apply-link">Click here </a>
          </div>
          
          <div class="job-warning-note">
            <span><strong>Note:</strong> Before applying for a job, make sure to double-check the job information.</span>
          </div>
        </div>
        
        <!-- Card 3: Job Summary -->
        <div class="info-card summary-card">
          <h1 class="card-section-title">Quick Highlights</h1>
          
          <div class="summary-grid">
            <!-- Company -->
            <div class="summary-item">
              <div class="item-icon company-icon">
                <i class="bi bi-building-fill"></i>
              </div>
              <div class="item-details">
                <span class="item-label">Company</span>
                <span class="item-value">{{ job.company }}</span>
              </div>
            </div>
            
            <!-- Job Type -->
            <div class="summary-item">
              <div class="item-icon category-icon">
                <i class="bi bi-tag-fill"></i>
              </div>
              <div class="item-details">
                <span class="item-label">Category</span>
                <span class="item-value">{{ job.category }}</span>
              </div>
            </div>

            <!-- Date -->
            <div class="summary-item">
              <div class="item-icon date-icon">
                <i class="bi bi-calendar-check-fill"></i>
              </div>
              <div class="item-details">
                <span class="item-label">Posted On</span>
                <span class="item-value">{{ formatDate(job.createdDate) }}</span>
              </div>
            </div>
          </div>

          <div class="summary-divider"></div>
          
          <div class="action-section">
            <h6 class="action-title">Share Opportunity</h6>
            <div class="action-grid">
              <button class="action-pill share-pill" (click)="shareJob(job)">
                <i class="bi bi-share-fill"></i>
                <span>Share</span>
              </button>
              <button class="action-pill whatsapp-pill" (click)="shareOnWhatsApp(job)">
                <i class="bi bi-whatsapp"></i>
                <span>WhatsApp</span>
              </button>
              <button class="action-pill copy-pill" (click)="copyLink(job)">
                <i class="bi bi-link-45deg"></i>
                <span>Copy</span>
              </button>
            </div>
          </div>

          <div class="summary-divider"></div>

          <div class="follow-section">
            <h6 class="action-title">Join Groups</h6>
            <div class="follow-grid">
              <button class="follow-pill wa-group-pill" (click)="openExternalChannel('https://whatsapp.com/channel/0029VbCLJWjCRs1nIKjUlh3p')">
                <i class="bi bi-whatsapp"></i>
                <span>WhatsApp Group</span>
              </button>
              <button class="follow-pill yt-pill" (click)="openExternalChannel('https://www.youtube.com/@allindiajobs-newjobs')">
                <i class="bi bi-youtube"></i>
                <span>YouTube Channel</span>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-6 order-2 order-lg-2">
        <!-- Card: Top Latest Jobs (No Scroll) -->
        <div class="info-card sidebar-card">
          <h5 class="card-section-title">Top Latest Jobs</h5>
          <div *ngIf="!isLoading && latestJobs && latestJobs.length > 0" class="jobs-list">
            <div *ngFor="let latestJob of latestJobs.slice(0, 10); trackBy: trackByJobId; let i = index" 
                 class="job-list-item"
                 (click)="viewJobDetails(latestJob)">
              <div class="job-number">{{ i + 1 }}</div>
              <div class="job-info">
                <div class="job-name">
                  {{ latestJob.title }}
                </div>
                <div class="job-meta-mini">
                  <span class="job-category">{{ latestJob.category }}</span>
                  <span class="meta-sep">|</span>
                  <span class="job-time-ago">{{ getTimeAgo(latestJob.createdDate) }}</span>
                </div>
              </div>
            </div>
          </div>
          <div *ngIf="!isLoading && (!latestJobs || latestJobs.length === 0)" class="no-jobs">No jobs available</div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="!isLoading && !job" class="ultra-not-found">
    <h3>Job Not Found</h3>
    <button class="ultra-back-btn" (click)="goBack()">Back to Jobs</button>
  </div>
</div>

